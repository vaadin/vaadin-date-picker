<dom-module id="date-picker-advanced-demos">
  <template>
    <style>
       :host {
        display: block;
      }

    </style>


    <h3>Localizing</h3>
    <vaadin-demo-snippet id='date-picker-advanced-demos-localizing'>
      <template preserve-content>
        <vaadin-date-picker label="Syntymäpäivä" id="finnish" value="1980-08-14">
        </vaadin-date-picker>
        <script>
        window.addDemoReadyListener('#date-picker-advanced-demos-localizing', function(document) {
          // Async call needed here for IE11 compatibility.
          Polymer.Base.async(function() {
            // Set up the parser library for Finnish locale
            Sugar.Date.setLocale('fi');

            var datepicker = document.querySelector('vaadin-date-picker#finnish');
            datepicker.i18n = {
              week: 'viikko',
              calendar: 'kalenteri',
              clear: 'tyhjennä',
              today: 'tänään',
              cancel: 'peruuta',
              firstDayOfWeek: 1,
              monthNames:
               'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),
              weekdays: 'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),
              weekdaysShort: 'su_ma_ti_ke_to_pe_la'.split('_'),
              formatDate: function(date) {
                return Sugar.Date.format(date, '{short}');
              },
              formatTitle: function(monthName, fullYear) {
                return monthName + ' ' + fullYear;
              },
              parseDate: function(dateString) {
                var matches = datepicker.i18n.monthNames.filter(function(monthName) {
                  return monthName.toLowerCase().substr(0, dateString.trim().toLowerCase().length) === dateString.trim().toLowerCase();
                });
                dateString = matches.length === 1 ? matches[0] : dateString;
                // Parse the date
                return Sugar.Date.create(dateString);
              }
            };
          });
        });
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Custom Validator</h3>
    <p>
      Either extend <code>Vaadin.DatePickerElement</code> and override the <code>checkValidity(value)</code> method or
      replace the entire <code>checkValidity(value)</code> method.
    </p>
    <vaadin-demo-snippet id='date-picker-advanced-demos-custom-validator'>
      <template preserve-content>
        <vaadin-date-picker id="custom-validator"></vaadin-date-picker>

        <script>
          window.addDemoReadyListener('#date-picker-advanced-demos-custom-validator', function(document) {
            // Async call needed here for IE11 compatibility.
            Polymer.Base.async(function() {
              var datepicker = document.querySelector('vaadin-date-picker#custom-validator');
              datepicker.checkValidity = function(value) {
                var inputValid = !value || (this._selectedDate && value === this.i18n.formatDate(this._selectedDate));
                var minMaxValid = !this._selectedDate ||
                Vaadin.DatePickerHelper._dateAllowed(this._selectedDate, this._minDate, this._maxDate);

                var inputValidity = true;
                if (this._inputElement) {
                  if (this._inputElement.checkValidity) {
                    // vaadin native input elements have the checkValidity method
                    inputValidity = this._inputElement.checkValidity(value);
                  } else if (this._inputElement.validate) {
                    // iron-form-elements have the validate API
                    inputValidity = this._inputElement.validate(value);
                  }
                }

                // Validate year to equal to current year
                var currentYear = new Date().getFullYear();
                var yearValid = new Date(value).getFullYear() === currentYear;

                return inputValid && minMaxValid && inputValidity && yearValid;
              }
            });
          });
          
        </script>
      </template>
    </vaadin-demo-snippet>


    <h3>Custom Inputs</h3>
    <vaadin-demo-snippet id='date-picker-advanced-demos-custom-inputs'>
      <template preserve-content>
        <style is="custom-style">
          .my-input1 input {
            background: #f5f5f5;
            border: 2px solid #2196f3;
            border-radius: 4px;
            padding: 4px;
            text-align: center;
          }
        </style>
        <vaadin-date-picker-light class="my-input1">
          <iron-input>
            <input placeholder="Date" size="10"/>
          </iron-input>
        </vaadin-date-picker-light>
      </template>
    </vaadin-demo-snippet>

    <vaadin-demo-snippet id='date-picker-advanced-demos-custom-inputs'>
      <template preserve-content>
        <style is="custom-style">
          .my-input2 input {
            border: none;
            font-size: 14px;
            background: none;
          }
        </style>
        <vaadin-date-picker-light>
         <div class="my-input2">
           <iron-icon icon="event"></iron-icon>
           CHECK-IN:
           <iron-input>
             <input size="10"/>
           </iron-input>

         </div>
        </vaadin-date-picker-light>
      </template>
    </vaadin-demo-snippet>

  </div>
  </template>
  <script>
    class DatePickerAdvancedDemos extends DemoReadyEventEmitter(DatePickerDemo(Polymer.Element)) {
      static get is() {
        return 'date-picker-advanced-demos';
      }
    }
    customElements.define(DatePickerAdvancedDemos.is, DatePickerAdvancedDemos);
  </script>
</dom-module>
